/*! BCCCarousel - v0.4.3 - 2015-10-30 */window.app||(window.app={}),window.app.components||(window.app.components={}),window.app.components.Carousel=function(a){"use strict";function b(c,d){return this.options=a.extend({},this.defaults,d||{}),this.$el=c,b.prototype.init.apply(this,arguments)}if(!(a&&"jcarousel"in a.fn))throw new Error("BCC Carousel Component: unable to find jQuery or jCarousel");return b.extend=function(c){var d,e,f=b.prototype;for(d in c)e=c[d],"function"==typeof e&&d in f&&(c[d]=function(a,b,c){return function(){return this._super=b,c.apply(this,arguments)}}(d,f[d],e));a.extend(!0,b.prototype,c)},b.prototype=a.extend({defaults:{perPage:4,moveBy:4,startIndex:0,wrap:null,activeClass:"is-active",disabledClass:"is-disabled",addPlaceholderItems:!1},init:function(){var b=this.options,c=this;this._currentPage=0,this._namespace=".bcc-carousel"+(new Date).getTime(),this._cacheElems(),this._bindEvents(),b.addPlaceholderItems&&this._addPlaceholderItems(),a.each("create createend scroll scrollend animate animateend reload reloadend".split(" "),function(a,b){c.$carousel.on("jcarousel:"+b,function(){c.trigger.apply(c,[b].concat([].slice.call(arguments)))})}),b.startIndex>0?this.one("createend",function(){c.scrollToIndex(b.startIndex,!1)}):this.$lis.eq(0).addClass(b.activeClass),this.$carousel.jcarousel(b)},created:a.Deferred(),destroy:function(){this.$carousel.off(),this.$carousel.jcarousel("destroy"),this.$ul.removeAttr("style"),this.off(),a(window).off(this._namespace)},next:function(){this.$carousel.jcarousel("scroll","+="+this.options.moveBy)},prev:function(){this.$carousel.jcarousel("scroll","-="+this.options.moveBy)},scrollToElem:function(a,b){this.$carousel.jcarousel("scroll",a,b)},scrollToIndex:function(a,b){var c=this.$lis.eq(a);this.scrollToElem(c,b)},reload:function(){this.$carousel.jcarousel("reload")},isItemVisible:function(a){return this.$carousel.jcarousel("fullyvisible").filter(a).length},isAnimating:function(){return!!this.$carousel.data("jcarousel").animating},getTarget:function(){return this.$carousel.jcarousel("target")},_bindEvents:function(){this.one("createend",function(){this.created.resolve(this)}.bind(this))},_cacheElems:function(){this.$carousel=this.$el.find(".bcc-carousel-hook"),this.$ul=this.$carousel.find("ul"),this.$lis=this.$ul.children()},_addPlaceholderItems:function(){var a,b=this.options.perPage,c=b-this.$lis.length%b;for(a=0;c>a;a++)this.$ul.append('<li class="bcc-carousel-placeholder"></li>');this.$lis=this.$ul.children()}}),b.extend({init:function(){this._$eventBus=a({}),this._super()},on:function(){return this._$eventBus.on.apply(this._$eventBus,arguments),this},one:function(){return this._$eventBus.one.apply(this._$eventBus,arguments),this},off:function(){return this._$eventBus.off.apply(this._$eventBus,arguments),this},trigger:function(){return this._$eventBus.trigger.apply(this._$eventBus,arguments),this}}),"function"==typeof define&&define.amd?define("bcccarousel",[],function(){return b}):"undefined"!=typeof module&&(module.exports=b),b}(window.jQuery),function(){"use strict";window.app.components.Carousel.extend({defaults:{paginationEnabled:"auto",paginationElement:function(){return this.$el.find(".bcc-carousel-pagination")},paginationTemplate:function(a){return'<li><a href="#'+a+'">&bull;</a></li>'}},init:function(){this._super(),this._hasPagination()&&(this.$el.addClass("has-pagination"),this.$pagination.jcarouselPagination({item:this.options.paginationTemplate,perPage:this.options.perPage}))},destroy:function(){this._hasPagination()&&(this.$pagination.off(),this.$pagination.jcarouselPagination("destroy")),this._super()},next:function(){return this._hasPagination()&&"circular"!==this.options.wrap?void(this.isAnimating()||this.$pagination.find("."+this.options.activeClass).next().trigger("click")):void this._super()},prev:function(){return this._hasPagination()&&"circular"!==this.options.wrap?void(this.isAnimating()||this.$pagination.find("."+this.options.activeClass).prev().trigger("click")):void this._super()},scrollToPage:function(a){this.isAnimating()||this.$pagination.find("li").eq(a).trigger("click")},scrollToPageByIndex:function(a){for(var b=this.$lis.get(),c=0,d=[],e=0;b.length;)d.push(b.splice(0,this.options.perPage));for(var f=0,g=d.length;g>f;f++){var h=d[f];if(c)break;for(var i=0,j=h.length;j>i;i++){var k=h[i];if($(k).index()===a){c=f;break}e++}}this.scrollToPage(c)},getPaginationObject:function(){return this.$pagination.data("jcarouselPagination")},getCurrentPage:function(){return parseInt(this.getPaginationObject()._currentPage,10)},getTotalPages:function(){return Object.keys(this.getPaginationObject()._pages).length},_bindEvents:function(){if(this._super(),this._hasPagination()){var a=(this.options.activeClass,this.options.disabledClass,this);this.$pagination.on("jcarouselpagination:active","li",function(b){a._currentPage=$(b.currentTarget).index(),a._updatePagination()}),this.$pagination.on("click","li",function(b){a._currentPage=$(b.currentTarget).index(),a._updatePagination()}),this.on("reloadend",function(){a.$pagination.jcarouselPagination("reload",{perPage:a.options.perPage})})}},_cacheElems:function(){this._super(),this.$pagination=this.options.paginationElement.call(this)},_hasPagination:function(){var a=this.options.paginationEnabled;return a===!0?!0:"auto"===a?this.$lis.length>this.options.perPage:!1},_updatePagination:function(){var a=this.$pagination.find("li"),b=a.eq(this._currentPage),c=this.options.activeClass;b.addClass(c),b.siblings().removeClass(c)}})}(),function(){"use strict";window.app.components.Carousel.extend({defaults:{controls:{enabled:"auto",nextBtn:".bcc-carousel-next",prevBtn:".bcc-carousel-prev"}},init:function(){if(this._super(),this._hasControls()){if(!this.$nextBtn.length||!this.$prevBtn.length)throw new Error("Controls are enabled but they could not be found in the DOM");this.$nextBtn.jcarouselControl({target:this._getTargetValueFor("next"),method:this.next.bind(this)}),this.$prevBtn.jcarouselControl({target:this._getTargetValueFor("prev"),method:this.prev.bind(this)})}},destroy:function(){this._hasControls()&&(this.$nextBtn.add(this.$prevBtn).off(),this.$nextBtn.jcarouselControl("destroy"),this.$prevBtn.jcarouselControl("destroy")),this._super()},_cacheElems:function(){this._super(),this.$nextBtn=this.$el.find(this.options.controls.nextBtn),this.$prevBtn=this.$el.find(this.options.controls.prevBtn)},_bindEvents:function(){if(this._super(),!this.options.wrap){var a=this.options.disabledClass;this.$prevBtn.add(this.$nextBtn).on("jcarouselcontrol:active",function(){$(this).removeClass(a)}),this.$prevBtn.add(this.$nextBtn).on("jcarouselcontrol:inactive",function(){$(this).addClass(a)})}this.on("reloadend",function(){this.$nextBtn.jcarouselControl("reload",{target:this._getTargetValueFor("next")}),this.$prevBtn.jcarouselControl("reload",{target:this._getTargetValueFor("prev")})}.bind(this))},_updatePagination:function(){if(this._super(),"circular"!==this.options.wrap&&this._hasControls()){var a=this.options.disabledClass,b=this._currentPage+1,c=this.getTotalPages(),d=1===b&&c>1||1===c,e=1===c||b>=c;this.$prevBtn.toggleClass(a,d),this.$nextBtn.toggleClass(a,e)}},_hasControls:function(){var a=this.options.controls.enabled;return a===!0?!0:"auto"===a?this.$lis.length>this.options.perPage:!1},_getTargetValueFor:function(a){return("next"===a?"+":"-")+"="+this.options.moveBy}})}(),function(){"use strict";window.app.components.Carousel.extend({defaults:{lazyLoadImages:!1,lazyLoadClass:"bcc-carousel-fade-in"},init:function(){this._super(),this.options.lazyLoadImages&&this.$el.addClass("has-lazyloading")},_bindEvents:function(){if(this._super(),this.options.lazyLoadImages){var a=this._lazyload.bind(this);this.on("scroll",a),this.on("scrollend",a),this.on("createend",a),this.on("breakpoint:change",a),this.$carousel.on("scroll",a)}},_getVisibleItems:function(){return this._currentBreakpoint&&"overflow"===this._currentBreakpoint.scroll?this.$lis.filter(function(a,b){var c=b.getBoundingClientRect();return c.right<=(window.innerWidth||document.documentElement.clientWidth)+window.innerWidth}):this.$carousel.jcarousel("visible")},_lazyload:function(){var a=this._getVisibleItems(),b=this.options.lazyLoadClass;a&&a.length&&a.find("img[data-src]").each(function(a,c){var d=$(c),e=d.data("src");c.complete?d.addClass(b):(d.one("load",function(){d.addClass(b)}),d.one("error",function(){d.removeAttr("data-src")})),c.src!==e&&(c.src=e)})}})}(),function(){"use strict";window.app.components.Carousel.extend({defaults:{autoscroll:{target:"+=1",interval:3e3,autostart:!1}},init:function(){this._super();var a=this.options.autoscroll;a.autostart&&this.$carousel.jcarouselAutoscroll(a)},destroy:function(){this.options.autoscroll.autostart&&this.$carousel.jcarouselAutoscroll("destroy"),this._super()}})}(),function(){"use strict";window.app.components.Carousel.extend({defaults:{touchScrolling:!1,touchScrollingSnap:"item",touchScrollingDelta:100},init:function(){this._super(),this._enableTouchScrolling()},destroy:function(){this._disableTouchScrolling(),this._disableOverflowScrolling(),this._super()},_bindEvents:function(){this._super(),this.on("breakpoint:change",function(a,b){"overflow"===b.scroll?this._enableOverflowScrolling():this._enableTouchScrolling()}.bind(this))},_enableOverflowScrolling:function(){this._overflowScrollingEnabled||(this._disableTouchScrolling(),this.$el.addClass("has-overflow-scrolling"),this._overflowScrollingEnabled=!0)},_disableOverflowScrolling:function(){this._overflowScrollingEnabled&&(this.$carousel.scrollLeft(0),this.$el.removeClass("has-overflow-scrolling"),this.$ul.removeAttr("style"),this._overflowScrollingEnabled=!1)},_enableTouchScrolling:function(){this._disableOverflowScrolling(),"ontouchstart"in window&&!this._touchScrollingEnabled&&this.options.touchScrolling&&(this.$carousel.on("touchstart touchend touchmove",this._handleTouchEvent.bind(this)),this._touchScrollingEnabled=!0)},_disableTouchScrolling:function(){this.$carousel.off("touchstart touchend touchmove"),this._touchScrollingEnabled=!1},_handleTouchEvent:function(a){a=a.originalEvent,"touchstart"===a.type?this._onTouchStart(a):"touchmove"===a.type?this._onTouchMove(a):this._onTouchEnd(a)},_onTouchStart:function(a){var b=a.targetTouches[0];this._firstVisibleElem=this.$carousel.jcarousel("fullyvisible")[0],this._startCoords={x:b.pageX,y:b.pageY},this._touchMovePos=this._startCoords.x},_onTouchMove:function(a){var b,c,d=this.$ul[0],e=this.options,f=e.transitions&&e.transitions.transforms,g=a.touches[0],h={x:g.pageX-this._startCoords.x,y:g.pageY-this._startCoords.y};Math.abs(h.x)>=Math.abs(h.y)&&a.preventDefault(),f?(b=d.style.transform?"transform":d.style.webkitTransform?"webkitTransform":d.style.mozTransform?"mozTransform":null,c=parseInt(d.style[b].split("(")[1].replace("px",""),10)):c=parseInt(d.style.left.replace("px",""),10);var i=a.targetTouches[0].pageX,j=this._touchMovePos-i,k=this.$lis.outerWidth(),l=this.$lis.length*k*-1+k*this.options.perPage,m=c-j;this.direction=i>this._touchMovePos?"backwards":"forwards",this._touchMovePos=i,m>0&&(m=0),0>m&&l>m&&(m=l),m+="px","track"===this.options.touchScrolling&&(f?d.style[b]="translate("+m+", 0)":d.style.left=m)},_onTouchEnd:function(){var a=this.options,b=Math.abs(this._startCoords.x-this._touchMovePos),c=b<=a.touchScrollingDelta;if("track"===a.touchScrolling&&c)return void this.scrollToElem(this._firstVisibleElem,!0);if("swipe"!==a.touchScrolling||!c)if("item"===a.touchScrollingSnap){var d=this.$lis.width(),e=this.$carousel.width(),f=this.$lis.filter(function(a,b){var c=b.getBoundingClientRect().left;return c+d>0&&e>c}.bind(this)).get(),g="forwards"===this.direction?f[1]:f[0];this.scrollToElem(g,!1)}else"page"===a.touchScrollingSnap&&this["forwards"===this.direction?"next":"prev"]()}})}(),function(){"use strict";var a=function(a,b,c){b||(b=250);var d,e;return function(){var f=c||this,g=(new Date).getTime(),h=arguments;d&&d+b>g?(clearTimeout(e),e=setTimeout(function(){d=g,a.apply(f,h)},b)):(d=g,a.apply(f,h))}};window.app.components.Carousel.extend({defaults:{responsive:!1,responsiveThrottle:100,breakpoints:[]},init:function(){this._super(),this.options.responsive&&this._calculateWidth()},destroy:function(){this.options.responsive&&this.$lis.removeAttr("style"),this._super()},_bindEvents:function(){if(this._super(),this.options.responsive){var b=a(this._calculateWidth,this.options.responsiveThrottle,this);$(window).on("resize"+this._namespace,b)}},_applyBreakpoint:function(a){this.options.moveBy=a.moveBy,this.options.perPage=a.perPage,this.$carousel.jcarousel("reload"),this.trigger("breakpoint:change",a,this._currentBreakpoint),this._currentBreakpoint=a},_calculateWidth:function(){var a,b,c,d,e=this.options,f=function(a){var b=this.$carousel.innerWidth()/a.perPage;this._applyWidth(b,a)}.bind(this);if(!e.breakpoints.length)return f({perPage:e.perPage});var g=window.innerWidth;for(c=0,d=e.breakpoints.length;d>c;c++)if(a=e.breakpoints[c],g>=a.minWidth){if(a.maxWidth&&g>a.maxWidth)continue;b=a}b&&(f(b),this._currentBreakpoint&&this._currentBreakpoint.minWidth===b.minWidth||this._applyBreakpoint(b))},_applyWidth:function(a,b){for(var c=this.$lis,d=0,e=c.length;e>d;d++)c[d].style.width=a+"px";b&&"overflow"===b.scroll&&(this.$ul[0].style.width=c.length*a+"px")}})}();