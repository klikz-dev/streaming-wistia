{
  "name": "node-cms",
  "version": "1.0.8",
  "description": "A node wrapper for the Brightcove CMS API",
  "main": "index.js",
  "scripts": {
    "start": "nodemon index.js",
    "test": "mocha"
  },
  "author": "",
  "license": "ISC",
  "dependencies": {
    "generaterr": "1.1.2",
    "lodash": "3.10.1",
    "md5": "2.0.0",
    "nodemon": "1.4.0",
    "oauth": "0.9.13",
    "query-string": "3.0.0",
    "request": "2.60.0"
  },
  "devDependencies": {
    "chai": "3.2.0",
    "chai-as-promised": "5.1.0",
    "mocha": "2.2.5",
    "node-cache": "3.0.0"
  },
  "readme": "# node-cms\n\nThis is a wrapper for the Brightcove CMS API. An API reference can be found [here](http://docs.brightcove.com/en/video-cloud/cms-api/getting-started/overview-cms.html).\n\n### Usage\n\n```js\nvar cms = require('node-cms');\n\ncms.init({\n\taccountId: accountId,\n\tclientId: clientId,\n\tclientSecret: clientSecret\n}, defaultName, opts);\n\n// Get a list of videos\nvar queryParams = {\n\tq: 'name:gossip',\n\tsort: '-updated_at'\n};\n\ncms.videos.list(queryParams).then(function(response) {\n\tvar videos = response.data;\n\t// Perform whatever action you need the videos for\n});\n```\n\n\n### Parameters\nThe parameters can all be found in the *Admin > API Authentication* section of your Video Cloud account.\n\nName|Description\n----|------------\naccountId|Your Video Cloud account ID.\nclientId|The client ID of Application youre using to access the API.\nclientSecret|The client secret of the Application youre using to access the API.\ndefaultName|An optional default name for this account. If not specified, it's **DEFAULT**.\nopts|An optional object that allows enabling of certain other features (caching, auto-retry, etc)\n\n\n### Additional Options\nIn addition to the query parameters specified in the API documentation, there are additional parameters and options that can be passed in as well.\n\n#### Switching Accounts\nIt's possible to hold authentication credentials for multiple accounts in the same CMS instance. This is helpful if you have multiple Video Cloud accounts you want to query from. To switch to a specific account pass in an `account` key into options otherwise it will use the default from initialization.\n\n```js\n// This assumes you have already initialized the cms as shown in the example above\n\n// Add a new account. This only adds the credentials\ncms.addAccount({\n\taccountId: otherAccountId,\n\tclientId: otherClientId,\n\tclientSecret: otherClientSecret\n}, otherAccountName);\n\n// Switch account\ncms.videos.list(queryParams, { account: otherAccountName })\n```\n\n#### Caching\nYou can enable caching by passing in node-cache store when initializing the module. **This will enable caching for all accounts that have been added.** For example:\n\n```js\nvar NodeCache = require('node-cache');\n\nvar store = new NodeCache();\ncms.init({\n\taccountId: accountId,\n\tclientId: clientId,\n\tclientSecret: clientSecret\n}, defaultName, { store: store });\n```\n\nOnce initialized requests will be cached however, you can also disable caching on a per-request basis by including a `cache` key in the passed in options\n\n```js\n// Calls have been made to retrieve videos...\n\n// Will use the cache\ncms.videos.list(queryParams)\n\n// Will not use the cache\ncms.videos.list(queryParams, { cache: false })\n```\n\n#### Requesting all resources\nFor requests that take query parameters, the CMS API will limit the number of results to 20 by default and 100 at a maximum. You can get all the resources in a single request by including a `fetch_all` key in the passed in options.\n\n```js\n// This will fetch all videos, even if the number exceeds 100\ncms.videos.list(undefined, { fetch_all: true })\n```\n\n### Getting sources with video metadata\nUsually to get a videos sources (renditions) you need to make a separate call to `cms.videos.sources()`. For convenience, you can include the sources with a video metadata by including a `get_sources` key in options\n\n```js\ncms.videos.get('123456789', { get_sources: true })\n```\n\n#### Automatically retry after rate limiting\nAs specified in the API docs, there is an upper limit on the number of concurrent requests and queries that can be made a second. If exceeded an error will be thrown. You can enable [auto retry](https://en.wikipedia.org/wiki/Exponential_backoff) which will attempt to make the request until it succeeds or 5 attempts have been made. **By default it is disabled.**\n\n```js\ncms.init({\n\taccountId: accountId,\n\tclientId: clientId,\n\tclientSecret: clientSecret\n}, defaultName, { retry: true });\n```\n\n### Query Builder\n\nWhile queries can be entered as a string, as defined in the Brightcove API [documentation for search](http://docs.brightcove.com/en/video-cloud/cms-api/guides/search-videos.html), they can also be built using the `cms.query.parse()` function which will convert them to the appropriate string.\n\n#### Usage\n\nThe builder takes an array of query terms (javascript objects) combined in various ways and returns a query string.\n\n```js\n// This is equivalent to the query in the example above\nvar queryParams = {\n\tq: cms.query.parse([{ name: 'gossip'}]),\n\tsort: '-updated_at'\n};\n\ncms.videos.list(queryParams).then(function(response) {\n\tvar videos = response.data;\n\t// Perform whatever action you need the videos for\n});\n```\n\n#### Basic Search\n\nFor searching on fields (id, tags, etc) you simply include all the fields you want to search in an object of field:value pairs or as a string.\n\n```js\n//\nvar fields = [{\n\tname: foo,\n\ttags: bar,nature\n}, \"description:Stuff\"];\n\ncms.query.parse(fields);\n// name:foo tags:bar,nature description:Stuff\n```\n\n#### Date Ranges\n\nDate ranges are entered in as an array `[startDate endDate]`. Whenever a field matches any of the valid date fields (specified below) it will be parsed appropriately. Dates can be entered as javascript Date objects or Strings. Both `startDate` or `endDate` can be ommited for an open ended date range.\n\n**Valid Date Fields**\n* updated_at\n* created_at\n* schedule.starts_at\n* schedule.ends_at\n* published_at\n\n```js\n// Search videos updated between August 1, 2010 and October 8, 2010\nvar range = [{\n\tupdated_at: [new Date(2010, 7, 1), new Date(2010, 9, 8)]\n}];\n\ncms.query.parse(range);\n// updated_at:2010-08-01T04:00:00.000Z..2010-10-08T04:00:00.000Z\n```\n\n#### Combining Search Criteria\n\nQuery terms can be combined by breaking them into different objects and using boolean logic such as `AND` and `NO` in between them. By default, query terms use **OR**.\n\nWhenever a term is preceeded by `NOT` it has the appropriate symbol `-` prepended to all of its fields. Whenever terms have an `AND` before or after them, all of their fields are prepended with `+`. This is explained in greater depth in the search documentation.\n\n**Example**: Let's say we want to find all videos with the *name* \"gossip\", which do **not** have the *tag* \"bar\" **and** which were *updated_at* between August 1, 2010 and October 8, 2010.\n\n```js\nvar search = [\n\t'NOT',\n\t{ tags: 'bar' },\n\t{ name: 'gossip' },\n\t'AND',\n\tupdated_at: [new Date(2010, 7, 1), new Date(2010, 9, 8)]\n];\n\ncms.query.parse(search);\n// -tags:bar +name:gossip +updated_at:2010-08-01T04:00:00.000Z..2010-10-08T04:00:00.000Z\n```\n\n### Tests\n\nThere are some basic tests in the `test/` directory, broken down by modules. You can use the command `npm test` to run them all.\nAlternatively, you can add any tests you don't want to run to the `test/other/` directory and it will be ignored.\n",
  "readmeFilename": "README.md",
  "gitHead": "af60aa307d325548c484848cafc591bd0404f83e",
  "_id": "node-cms@1.0.8",
  "_shasum": "ce0cb3c48c84612dd250cd7811fbf6022a4ee1e3",
  "_from": "brightcoveps/Bayyinah-YBTV-cms",
  "_resolved": "git+https://github.com/brightcoveps/Bayyinah-YBTV-cms.git#af60aa307d325548c484848cafc591bd0404f83e"
}
